{% load staticfiles %}
<!DOCTYPE html>
<html>
    <head>
        <title>BPM Playlist Creator</title>
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="{% static 'css/stylesheet.css' %}">
    </head>
    <body>
        <h1>bpm-playlists</h1>
        <p>This app creates a Spotify playlist of songs from your Spotify library with a specified Beats Per Minute (BPM) range. Use it to help you create the perfect set of tunes for keeping that pace up when running! Enter the desired BPM range and a name for this new playlist.</p>

        <form action="{% url 'create' %}" method="post">
            {% csrf_token %}
            {{ form }}
            <input type="submit" value="Create playlist">
        </form>

        {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

        {% if playlist_info %}
        <p>Created playlist <strong>{{ playlist_info.playlist_name }}</strong> containing the following songs with bpm <strong>{{ playlist_info.min_bpm }}</strong> to <strong>{{ playlist_info.max_bpm }}</strong>! This is a private playlist on your account.</p>
        {% endif %}

        {% if playlist %}
            <div class="results">
                <div class="spotify-widget">
                    <iframe src="https://embed.spotify.com/?uri={{ playlist.uri }}&theme=white" width="500" height="420" frameborder="0" allowtransparency="true"></iframe>
                </div>
                <div class="playlist-table-wrapper">
                    <table>
                        <tr>
                            <th>Track</th>
                            <th>BPM</th>
                        </tr>
                        {% for t in playlist.tracks %}
                            <tr>
                                <td>{{ t.track.name }}</td>
                                <td align="right" style="padding-right: 10px;">{{ t.track.bpm }}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        {% endif %}

    </body>
</html>

